@if (ViewBag.connection == true)
{
    Layout = "_LayoutConnecter";
}
@model Canal

@if (ViewBag.messageError != null)
{
    <div class="row m-1 justify-content-center align-items-center">
        <div class="col alert alert-danger p-1">
            @ViewBag.messageError
        </div>
    </div>
}

<h1>Liste des publication du canal @Model.Theme</h1>

<table class="table">
    <thead class="thead-dark">
        <tr>
            <th scope="col">#</th>
            <th scope="col">Contenu</th>
            <th scope="col">Date de création</th>
        </tr>
    </thead>
    @foreach (Publication p in Model.ListPublication)
    {
        <tbody>
            <tr>
                <th scope="row">@p.PublicationId</th>
                <td>@p.Contenu</td>
                <td>@p.PublicationDateCreation</td>
            </tr>
        </tbody>
    }

</table>

<div>
    <form asp-controller="Publication" asp-action="SubmitPublication" method="post">
        <input type="hidden" name="idCanal" value="@Model.CanalId" />
        <div class="form-group">
            <textarea name="Contenu" class="col form-control p-1" placeholder="Ecrire une publication"></textarea>
        </div>
        <button type="submit" class="col-2 btn btn-secondary">Publier</button>
    </form>
</div>
